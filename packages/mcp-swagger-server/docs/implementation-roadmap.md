# MCP Swagger Server é‡æ„å®æ–½è®¡åˆ’

## é¡¹ç›®æ¦‚è§ˆ

### é‡æ„ç›®æ ‡
- âœ… ä¿æŒ100%å‘ä¸‹å…¼å®¹æ€§
- âœ… æä¾›å¼ºå¤§çš„å·¥å…·åº“æ¥å£
- âœ… æ”¯æŒåŠ¨æ€å·¥å…·æ³¨å†Œå’Œç®¡ç†
- âœ… ç”Ÿäº§çº§ç¨³å®šæ€§å’Œæ€§èƒ½
- âœ… æ”¯æŒå¤šç§é›†æˆåœºæ™¯

### æ¶æ„æ¼”è¿›
```
Current Architecture â†’ Target Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Monolithic    â”‚    â”‚    Layered Core     â”‚
â”‚   MCP Server    â”‚ => â”‚   + Adapters        â”‚
â”‚                 â”‚    â”‚   + Compatibility   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®æ–½é˜¶æ®µ

### Phase 1: æ ¸å¿ƒæ¶æ„æ„å»º (Week 1-2)

#### 1.1 ç±»å‹ç³»ç»Ÿå»ºç«‹
- [ ] åˆ›å»º `src/types/` ç›®å½•ç»“æ„
- [ ] å®ç°æ ¸å¿ƒç±»å‹å®šä¹‰ (`core.ts`, `adapters.ts`)
- [ ] ç¡®ä¿ä¸ç°æœ‰ç±»å‹çš„å…¼å®¹æ€§

```bash
mkdir -p src/types
touch src/types/core.ts src/types/adapters.ts src/types/index.ts
```

#### 1.2 æ ¸å¿ƒæ¨¡å—å®ç°
- [ ] å®ç° `ToolManager` ç±»
- [ ] å®ç° `MCPRegistry` ç±»  
- [ ] å®ç° `Transformer` ç±»
- [ ] æ·»åŠ å®Œæ•´çš„å•å…ƒæµ‹è¯•

```bash
mkdir -p src/core
touch src/core/ToolManager.ts src/core/MCPRegistry.ts src/core/Transformer.ts src/core/index.ts
```

#### 1.3 ä¼ è¾“å±‚é‡æ„
- [ ] æå–ç°æœ‰ä¼ è¾“å±‚ä»£ç åˆ° `src/transport/`
- [ ] å®ç°ç»Ÿä¸€çš„ä¼ è¾“æ¥å£
- [ ] ç¡®ä¿ä¸ç°æœ‰åŠŸèƒ½ä¸€è‡´

```bash
mkdir -p src/transport
touch src/transport/stdio.ts src/transport/sse.ts src/transport/streamable.ts src/transport/index.ts
```

**éªŒæ”¶æ ‡å‡†:**
- æ‰€æœ‰æ ¸å¿ƒç±»éƒ½æœ‰å®Œæ•´çš„æµ‹è¯•è¦†ç›–
- ç±»å‹ç³»ç»Ÿå®Œæ•´ä¸”ä¸¥æ ¼
- ä¼ è¾“å±‚åŠŸèƒ½ä¸ç°æœ‰ç‰ˆæœ¬å®Œå…¨ä¸€è‡´

### Phase 2: é€‚é…å™¨å±‚å¼€å‘ (Week 3-4)

#### 2.1 CLIé€‚é…å™¨
- [ ] å®ç° `CLIAdapter` ç±»
- [ ] æ”¯æŒæ‰€æœ‰ç°æœ‰å‘½ä»¤è¡Œå‚æ•°
- [ ] æ·»åŠ æ–°çš„åŠ¨æ€ç®¡ç†åŠŸèƒ½

#### 2.2 HTTPé€‚é…å™¨  
- [ ] å®ç° `HTTPAdapter` ç±»
- [ ] æ”¯æŒå¤šæœåŠ¡å™¨ç®¡ç†
- [ ] å®ç°ä¸­é—´ä»¶ç³»ç»Ÿï¼ˆè®¤è¯ã€é™æµã€ç›‘æ§ï¼‰

#### 2.3 åº“é€‚é…å™¨
- [ ] å®ç° `LibraryAdapter` ç±»
- [ ] æä¾›çº¯å‡½æ•°å¼æ¥å£
- [ ] æ”¯æŒäº‹ä»¶ç³»ç»Ÿ

#### 2.4 é€‚é…å™¨å·¥å‚
- [ ] å®ç° `AdapterFactory` 
- [ ] ç»Ÿä¸€çš„åˆ›å»ºæ¥å£
- [ ] é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†

**éªŒæ”¶æ ‡å‡†:**
- CLIé€‚é…å™¨ä¸ç°æœ‰åŠŸèƒ½100%å…¼å®¹
- HTTPé€‚é…å™¨æ”¯æŒNestJSç­‰æ¡†æ¶é›†æˆ
- åº“é€‚é…å™¨æä¾›çµæ´»çš„ç¼–ç¨‹æ¥å£

### Phase 3: å…¼å®¹å±‚å®ç° (Week 4-5)

#### 3.1 APIå…¼å®¹å±‚
- [ ] å®ç° `src/lib/server.ts` å…¼å®¹åŒ…è£…
- [ ] å®ç° `src/lib/initTools.ts` å…¼å®¹åŒ…è£…
- [ ] ç¡®ä¿æ‰€æœ‰ç°æœ‰APIè°ƒç”¨æ­£å¸¸å·¥ä½œ

#### 3.2 è¡Œä¸ºå…¼å®¹å±‚
- [ ] ä¿æŒç›¸åŒçš„æ—¥å¿—æ ¼å¼å’Œæ ·å¼
- [ ] ä¿æŒç›¸åŒçš„é”™è¯¯æ¶ˆæ¯å’Œå¤„ç†
- [ ] ä¿æŒç›¸åŒçš„é…ç½®å‚æ•°è§£æ

#### 3.3 å…¼å®¹æ€§æµ‹è¯•
- [ ] åˆ›å»ºå®Œæ•´çš„å›å½’æµ‹è¯•å¥—ä»¶
- [ ] æµ‹è¯•æ‰€æœ‰ç°æœ‰ä½¿ç”¨åœºæ™¯
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

**éªŒæ”¶æ ‡å‡†:**
- ç°æœ‰ä»£ç é›¶ä¿®æ”¹å³å¯è¿è¡Œ
- æ‰€æœ‰è¾“å‡ºæ ¼å¼ä¿æŒä¸€è‡´
- æ€§èƒ½ä¸ä½äºç°æœ‰ç‰ˆæœ¬

### Phase 4: é«˜çº§åŠŸèƒ½å¼€å‘ (Week 5-6)

#### 4.1 åŠ¨æ€å·¥å…·ç®¡ç†
- [ ] è¿è¡Œæ—¶å·¥å…·æ³¨å†Œ/æ³¨é”€
- [ ] å·¥å…·çƒ­é‡è½½
- [ ] å·¥å…·çŠ¶æ€ç›‘æ§

#### 4.2 ç›‘æ§å’Œè§‚æµ‹
- [ ] å¥åº·æ£€æŸ¥ç«¯ç‚¹
- [ ] æŒ‡æ ‡æ”¶é›†å’Œæš´éœ²
- [ ] ç»“æ„åŒ–æ—¥å¿—

#### 4.3 å®‰å…¨å’Œè®¤è¯
- [ ] JWTè®¤è¯æ”¯æŒ
- [ ] APIå¯†é’¥ç®¡ç†
- [ ] è¯·æ±‚é™æµ

#### 4.4 é›†æˆç¤ºä¾‹
- [ ] NestJSé›†æˆç¤ºä¾‹
- [ ] Expressé›†æˆç¤ºä¾‹
- [ ] Koaé›†æˆç¤ºä¾‹

**éªŒæ”¶æ ‡å‡†:**
- æ”¯æŒç”Ÿäº§çº§ç›‘æ§å’Œè§‚æµ‹
- æä¾›å®Œæ•´çš„å®‰å…¨æœºåˆ¶
- æœ‰è¯¦ç»†çš„é›†æˆæ–‡æ¡£å’Œç¤ºä¾‹

### Phase 5: æ–‡æ¡£å’Œå‘å¸ƒ (Week 6-7)

#### 5.1 æ–‡æ¡£ä½“ç³»
- [ ] APIæ–‡æ¡£æ›´æ–°
- [ ] è¿ç§»æŒ‡å—ç¼–å†™
- [ ] æœ€ä½³å®è·µæŒ‡å—
- [ ] æ•…éšœæ’é™¤æ–‡æ¡£

#### 5.2 ç¤ºä¾‹å’Œæ¨¡æ¿
- [ ] ç‹¬ç«‹ä½¿ç”¨ç¤ºä¾‹
- [ ] æ¡†æ¶é›†æˆæ¨¡æ¿
- [ ] è‡ªå®šä¹‰é€‚é…å™¨ç¤ºä¾‹

#### 5.3 å‘å¸ƒå‡†å¤‡
- [ ] ç‰ˆæœ¬å·è§„åˆ’
- [ ] å˜æ›´æ—¥å¿—ç¼–å†™
- [ ] å‘å¸ƒè„šæœ¬å’ŒCI/CD

**éªŒæ”¶æ ‡å‡†:**
- æ–‡æ¡£å®Œæ•´ä¸”æ˜“äºç†è§£
- ç¤ºä¾‹ä»£ç å¯ç›´æ¥è¿è¡Œ
- å‘å¸ƒæµç¨‹è‡ªåŠ¨åŒ–

## æŠ€æœ¯å®æ–½ç»†èŠ‚

### ç›®å½•ç»“æ„æ¼”è¿›

```
packages/mcp-swagger-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                    # ğŸ†• æ ¸å¿ƒå·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ ToolManager.ts
â”‚   â”‚   â”œâ”€â”€ MCPRegistry.ts
â”‚   â”‚   â”œâ”€â”€ Transformer.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ adapters/               # ğŸ†• é€‚é…å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ CLIAdapter.ts
â”‚   â”‚   â”œâ”€â”€ HTTPAdapter.ts
â”‚   â”‚   â”œâ”€â”€ LibraryAdapter.ts
â”‚   â”‚   â”œâ”€â”€ AdapterFactory.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                   # ğŸ†• å…¼å®¹å±‚
â”‚   â”‚   â”œâ”€â”€ server.ts          # å°è£…åŸserver.ts
â”‚   â”‚   â”œâ”€â”€ initTools.ts       # å°è£…åŸinitTools.ts
â”‚   â”‚   â”œâ”€â”€ transform.ts       # å°è£…è½¬æ¢åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ index.ts          # å…¼å®¹APIå¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ transport/             # ğŸ”„ é‡æ„ä¼ è¾“å±‚
â”‚   â”‚   â”œâ”€â”€ stdio.ts
â”‚   â”‚   â”œâ”€â”€ sse.ts
â”‚   â”‚   â”œâ”€â”€ streamable.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                # ğŸ†• ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ core.ts
â”‚   â”‚   â”œâ”€â”€ adapters.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                # ğŸ”„ å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â””â”€â”€ health.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ factories.ts          # ğŸ†• å·¥å‚å‡½æ•°
â”‚   â””â”€â”€ index.ts             # ğŸ”„ ä¸»å…¥å£(å…¼å®¹ä¼˜å…ˆ)
â”‚
â”œâ”€â”€ test/                     # ğŸ”„ æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ unit/                # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/         # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ compatibility/       # å…¼å®¹æ€§æµ‹è¯•
â”‚   â””â”€â”€ examples/           # ç¤ºä¾‹æµ‹è¯•
â”‚
â”œâ”€â”€ examples/                # ğŸ†• ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ standalone-cli.ts
â”‚   â”œâ”€â”€ nestjs-integration.ts
â”‚   â”œâ”€â”€ express-integration.ts
â”‚   â””â”€â”€ dynamic-tools.ts
â”‚
â””â”€â”€ docs/                   # ğŸ”„ æ–‡æ¡£
    â”œâ”€â”€ API.md              # APIæ–‡æ¡£
    â”œâ”€â”€ MIGRATION.md        # è¿ç§»æŒ‡å—
    â”œâ”€â”€ EXAMPLES.md         # ç¤ºä¾‹æ–‡æ¡£
    â””â”€â”€ TROUBLESHOOTING.md  # æ•…éšœæ’é™¤
```

### å…³é”®å®æ–½ç‚¹

#### 1. æ¸è¿›å¼é‡æ„ç­–ç•¥
```typescript
// ä¿æŒç°æœ‰å…¥å£ä¸å˜
// src/index.ts - ç°æœ‰ä»£ç ç»§ç»­å·¥ä½œ
export * from './lib';        // å…¼å®¹å±‚ä¼˜å…ˆ
export * from './core';       // æ–°åŠŸèƒ½å¯é€‰
export * from './adapters';   // é«˜çº§åŠŸèƒ½
```

#### 2. åŒæ¨¡å¼è¿è¡Œ
```typescript
// æ¨¡å¼1: å…¼å®¹æ¨¡å¼(é»˜è®¤)
import { runStdioServer } from '@mcp-swagger/server';
runStdioServer(); // æ— éœ€ä¿®æ”¹

// æ¨¡å¼2: æ–°æ¶æ„æ¨¡å¼
import { AdapterFactory } from '@mcp-swagger/server';
const adapter = AdapterFactory.createCLI();
adapter.runStandalone({ transport: 'stdio' });
```

#### 3. æµ‹è¯•ç­–ç•¥
```bash
# å…¼å®¹æ€§æµ‹è¯•
npm run test:compatibility

# æ–°åŠŸèƒ½æµ‹è¯•  
npm run test:new-features

# æ€§èƒ½æµ‹è¯•
npm run test:performance

# é›†æˆæµ‹è¯•
npm run test:integration
```

## é£é™©ç®¡ç†

### æŠ€æœ¯é£é™©
| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| å…¼å®¹æ€§ç ´å | é«˜ | ä½ | å®Œæ•´çš„å›å½’æµ‹è¯• |
| æ€§èƒ½ä¸‹é™ | ä¸­ | ä¸­ | æ€§èƒ½åŸºå‡†æµ‹è¯• |
| å¤æ‚æ€§å¢åŠ  | ä¸­ | é«˜ | åˆ†å±‚æ¶æ„è®¾è®¡ |
| è¿ç§»å›°éš¾ | ä½ | ä½ | è¯¦ç»†è¿ç§»æŒ‡å— |

### ç¼“è§£ç­–ç•¥
1. **å…¼å®¹æ€§ä¿è¯**: æ‰€æœ‰ç°æœ‰APIä¿æŒä¸å˜
2. **æ¸è¿›å¼å‡çº§**: ç”¨æˆ·å¯é€‰æ‹©å‡çº§èŠ‚å¥
3. **å®Œæ•´æµ‹è¯•**: è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–æ‰€æœ‰åœºæ™¯
4. **æ–‡æ¡£æ”¯æŒ**: è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹

## è´¨é‡æ ‡å‡†

### ä»£ç è´¨é‡
- TypeScriptä¸¥æ ¼æ¨¡å¼
- 90%ä»¥ä¸Šæµ‹è¯•è¦†ç›–ç‡
- ESLint + Prettierä»£ç è§„èŒƒ
- å®Œæ•´çš„APIæ–‡æ¡£

### æ€§èƒ½æ ‡å‡†
- å¯åŠ¨æ—¶é—´ < 2ç§’
- å†…å­˜ä½¿ç”¨ < 50MB (åŸºç¡€åœºæ™¯)
- å·¥å…·æ³¨å†Œæ—¶é—´ < 100ms/å·¥å…·
- HTTPå“åº”æ—¶é—´ < 200ms

### ç¨³å®šæ€§æ ‡å‡†
- 24å°æ—¶è¿ç»­è¿è¡Œæ— å†…å­˜æ³„æ¼
- æ”¯æŒ1000+å¹¶å‘å·¥å…·è°ƒç”¨
- ä¼˜é›…å¤„ç†æ‰€æœ‰é”™è¯¯åœºæ™¯
- é›¶åœæœºçƒ­é‡è½½

## äº¤ä»˜æˆæœ

### ä»£ç äº¤ä»˜
- [ ] å®Œæ•´çš„é‡æ„ä»£ç 
- [ ] 100%å‘ä¸‹å…¼å®¹çš„API
- [ ] å…¨é¢çš„æµ‹è¯•å¥—ä»¶
- [ ] ç”Ÿäº§çº§ç›‘æ§å’Œæ—¥å¿—

### æ–‡æ¡£äº¤ä»˜
- [ ] å®Œæ•´çš„APIæ–‡æ¡£
- [ ] è¯¦ç»†çš„è¿ç§»æŒ‡å—
- [ ] ä¸°å¯Œçš„ä½¿ç”¨ç¤ºä¾‹
- [ ] æ•…éšœæ’é™¤æŒ‡å—

### å·¥å…·äº¤ä»˜
- [ ] è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬
- [ ] CI/CDæµæ°´çº¿é…ç½®
- [ ] æ€§èƒ½æµ‹è¯•å·¥å…·
- [ ] éƒ¨ç½²å’Œç›‘æ§å·¥å…·

## æˆåŠŸæŒ‡æ ‡

### å…¼å®¹æ€§æŒ‡æ ‡
- âœ… ç°æœ‰ä»£ç 100%æ— ä¿®æ”¹è¿è¡Œ
- âœ… æ‰€æœ‰è¾“å‡ºæ ¼å¼ä¿æŒä¸€è‡´
- âœ… æ€§èƒ½ä¸ä½äºç°æœ‰ç‰ˆæœ¬

### åŠŸèƒ½æŒ‡æ ‡  
- âœ… æ”¯æŒåŠ¨æ€å·¥å…·ç®¡ç†
- âœ… æ”¯æŒå¤šç§é›†æˆæ–¹å¼
- âœ… æä¾›ç”Ÿäº§çº§ç›‘æ§

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- âœ… å‡çº§æˆæœ¬ä¸ºé›¶
- âœ… æ–°åŠŸèƒ½æ˜“äºä½¿ç”¨
- âœ… æ–‡æ¡£æ¸…æ™°å®Œæ•´

è¿™ä¸ªå®æ–½è®¡åˆ’ç¡®ä¿äº†é‡æ„è¿‡ç¨‹çš„å®‰å…¨æ€§å’Œå¯æ§æ€§ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­ä½¿ç”¨ç°æœ‰åŠŸèƒ½ï¼ŒåŒæ—¶è·å¾—æ–°æ¶æ„å¸¦æ¥çš„å¼ºå¤§èƒ½åŠ›ã€‚
