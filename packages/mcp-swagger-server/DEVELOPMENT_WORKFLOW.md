# å¼€å‘ä¸å‘å¸ƒå·¥ä½œæµæŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨å¼€å‘æ—¶ä½¿ç”¨æœ¬åœ°ä¾èµ–ï¼Œåœ¨å‘å¸ƒæ—¶ä½¿ç”¨æ­£å¸¸ç‰ˆæœ¬å·ã€‚

## ğŸ› ï¸ å¼€å‘æ¨¡å¼

### å½“å‰çŠ¶æ€
é¡¹ç›®å·²é…ç½®ä¸ºä½¿ç”¨ pnpm workspaceï¼Œ`mcp-swagger-parser` ä¾èµ–è®¾ç½®ä¸º `workspace:*`ï¼Œè¿™æ„å‘³ç€ï¼š
- âœ… è‡ªåŠ¨ä½¿ç”¨æœ¬åœ°çš„ `../mcp-swagger-parser` ä»£ç 
- âœ… ä¿®æ”¹ `mcp-swagger-parser` åæ— éœ€é‡æ–°å®‰è£…
- âœ… æ”¯æŒå®æ—¶å¼€å‘å’Œè°ƒè¯•

### éªŒè¯å¼€å‘ç¯å¢ƒ
```bash
# éªŒè¯æœ¬åœ°ä¾èµ–é“¾æ¥
ls -la node_modules/mcp-swagger-parser
# åº”è¯¥æ˜¾ç¤º: ... -> ../../mcp-swagger-parser

# éªŒè¯åŠŸèƒ½æ­£å¸¸
node verify-annotations.js
```

## ğŸ“¦ å‘å¸ƒæ¨¡å¼

### å‘å¸ƒå‰å‡†å¤‡
åœ¨æäº¤ä»£ç æˆ–å‘å¸ƒä¹‹å‰ï¼Œè¿è¡Œï¼š
```bash
pnpm run prepare:release
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- ğŸ”„ å°† `"mcp-swagger-parser": "workspace:*"` æ›¿æ¢ä¸ºå…·ä½“ç‰ˆæœ¬å·ï¼ˆå¦‚ `"1.0.4"`ï¼‰
- âœ… ç”Ÿæˆé€‚åˆå‘å¸ƒçš„ package.json

### å‘å¸ƒåæ¢å¤å¼€å‘æ¨¡å¼
å‘å¸ƒå®Œæˆåï¼Œæ¢å¤å¼€å‘ä¾èµ–ï¼š
```bash
pnpm run dev:deps
pnpm install  # é‡æ–°å»ºç«‹ workspace é“¾æ¥
```

## ğŸ”„ å®Œæ•´å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘
```bash
# 1. ç¡®ä¿ä½¿ç”¨ workspace ä¾èµ–
pnpm run dev:deps
pnpm install

# 2. å¼€å‘å’Œæµ‹è¯•
# ä¿®æ”¹ mcp-swagger-parser æˆ– mcp-swagger-server ä»£ç 
npm run build
node verify-annotations.js

# 3. è¿è¡Œæµ‹è¯•
npm run test  # å¦‚æœæœ‰æµ‹è¯•çš„è¯
```

### å‡†å¤‡å‘å¸ƒ
```bash
# 1. ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²æäº¤
git status

# 2. å‡†å¤‡å‘å¸ƒç‰ˆæœ¬
pnpm run prepare:release

# 3. æ£€æŸ¥ package.json æ˜¯å¦æ­£ç¡®
grep "mcp-swagger-parser" package.json
# åº”è¯¥æ˜¾ç¤ºå…·ä½“ç‰ˆæœ¬å·ï¼Œå¦‚: "mcp-swagger-parser": "1.0.4",

# 4. æ„å»ºå’Œå‘å¸ƒ
npm run build
npm publish

# 5. å‘å¸ƒåæ¢å¤å¼€å‘æ¨¡å¼
pnpm run dev:deps
pnpm install
```

## ğŸ“‹ è„šæœ¬è¯´æ˜

| è„šæœ¬ | åŠŸèƒ½ | ä½•æ—¶ä½¿ç”¨ |
|------|------|----------|
| `pnpm run dev:deps` | æ¢å¤ workspace ä¾èµ– | å¼€å‘æ—¶ã€å…‹éš†é¡¹ç›®å |
| `pnpm run prepare:release` | å‡†å¤‡å‘å¸ƒç‰ˆæœ¬ | å‘å¸ƒå‰ |
| `node verify-annotations.js` | éªŒè¯åŠŸèƒ½æ­£å¸¸ | å¼€å‘æ—¶æµ‹è¯• |

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦å°†å‘å¸ƒæ¨¡å¼çš„ package.json æäº¤åˆ° git**
   - å‘å¸ƒå‰è¿è¡Œ `prepare:release`
   - å‘å¸ƒåç«‹å³è¿è¡Œ `dev:deps` æ¢å¤

2. **ç¡®ä¿ç‰ˆæœ¬å·åŒæ­¥**
   - `mcp-swagger-parser` æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œå‘å¸ƒè„šæœ¬ä¼šè‡ªåŠ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬

3. **å›¢é˜Ÿåä½œ**
   - å…¶ä»–å¼€å‘è€…å…‹éš†é¡¹ç›®åï¼Œè¿è¡Œ `pnpm install` å³å¯è‡ªåŠ¨å»ºç«‹ workspace é“¾æ¥
   - å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¿è¡Œ `pnpm run dev:deps && pnpm install`

## ğŸ¯ æœ€ä½³å®è·µ

1. **å¼€å‘åˆ†æ”¯**: å§‹ç»ˆä¿æŒ `workspace:*` ä¾èµ–
2. **å‘å¸ƒåˆ†æ”¯**: ä¸´æ—¶ä½¿ç”¨å…·ä½“ç‰ˆæœ¬å·
3. **è‡ªåŠ¨åŒ–**: å¯ä»¥åœ¨ CI/CD ä¸­é›†æˆè¿™äº›è„šæœ¬
4. **ç‰ˆæœ¬ç®¡ç†**: ç¡®ä¿ `mcp-swagger-parser` ç‰ˆæœ¬å·åŠæ—¶æ›´æ–°

---

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥äº«å— monorepo å¼€å‘çš„ä¾¿åˆ©ï¼ŒåŒæ—¶ä¿è¯å‘å¸ƒçš„åŒ…å…·æœ‰æ­£ç¡®çš„ä¾èµ–ç‰ˆæœ¬ã€‚
